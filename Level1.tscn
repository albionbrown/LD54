[gd_scene load_steps=8 format=3 uid="uid://bcsdhwf32fjfj"]

[ext_resource type="PackedScene" uid="uid://cq7olfoq7q73f" path="res://Room.tscn" id="1_4vhe8"]
[ext_resource type="Script" path="res://Level.cs" id="1_8h056"]
[ext_resource type="PackedScene" uid="uid://djahqfp1a8mq1" path="res://Character.tscn" id="2_8dtn7"]
[ext_resource type="PackedScene" uid="uid://4w83sbrb04u" path="res://Walkway.tscn" id="2_rib5f"]
[ext_resource type="PackedScene" uid="uid://dqxatv04x4o63" path="res://Door.tscn" id="5_7e40v"]
[ext_resource type="PackedScene" uid="uid://bml2dkd1avc5r" path="res://Key.tscn" id="8_stw1h"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ea5df"]
size = Vector2(8, 64)

[node name="Level" type="Node" node_paths=PackedStringArray("FirstDoor")]
script = ExtResource("1_8h056")
FirstDoor = NodePath("Room1/Door")

[node name="ColorRect" type="ColorRect" parent="."]
offset_left = -1544.0
offset_top = -1560.0
offset_right = 3024.0
offset_bottom = 2216.0
color = Color(0, 0, 0, 1)

[node name="Room1" parent="." groups=["Rooms"] instance=ExtResource("1_4vhe8")]
position = Vector2(64, 0)
Name = "The Key Room"

[node name="Door" parent="Room1" node_paths=PackedStringArray("FurtherOpens") instance=ExtResource("5_7e40v")]
position = Vector2(0, 64)
FurtherOpens = []

[node name="Door2" parent="Room1" node_paths=PackedStringArray("FurtherOpens") instance=ExtResource("5_7e40v")]
position = Vector2(256, 128)
rotation = 3.14159
FurtherOpens = [NodePath("../../Room2/Door")]

[node name="StaticBody2D" type="StaticBody2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D"]
position = Vector2(-4, 96)
shape = SubResource("RectangleShape2D_ea5df")

[node name="Room2" parent="." groups=["Rooms"] instance=ExtResource("1_4vhe8")]
position = Vector2(448, 0)
Name = "The Key Code Room"

[node name="Door" parent="Room2" node_paths=PackedStringArray("FurtherOpens") instance=ExtResource("5_7e40v")]
position = Vector2(0, 64)
FurtherOpens = []

[node name="Door2" parent="Room2" node_paths=PackedStringArray("FurtherOpens") instance=ExtResource("5_7e40v")]
position = Vector2(256, 128)
rotation = 3.14159
FurtherOpens = []

[node name="Walkway" parent="." instance=ExtResource("2_rib5f")]
position = Vector2(64, 64)
rotation = 1.5708

[node name="Walkway4" parent="." instance=ExtResource("2_rib5f")]
position = Vector2(384, 64)
rotation = 1.5708

[node name="Walkway3" parent="." instance=ExtResource("2_rib5f")]
position = Vector2(448, 64)
rotation = 1.5708

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(16, 96)

[node name="OpenFirstDoorTimer" type="Timer" parent="."]
wait_time = 2.0
one_shot = true

[node name="RichTextLabel" type="RichTextLabel" parent="."]
offset_left = -184.0
offset_top = -120.0
text = "Welcome to {name}."

[node name="Character" parent="." groups=["Player"] instance=ExtResource("2_8dtn7")]
position = Vector2(16, 96)
rotation = 0.0

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Character"]
remote_path = NodePath("../../Camera2D")

[node name="Key" parent="." node_paths=PackedStringArray("UnlockDoors") instance=ExtResource("8_stw1h")]
position = Vector2(192, 96)
UnlockDoors = [NodePath("../Room1/Door2")]

[connection signal="timeout" from="OpenFirstDoorTimer" to="." method="_on_start_timer_timeout"]
[connection signal="body_exited" from="Key" to="Key" method="_on_body_exited"]
